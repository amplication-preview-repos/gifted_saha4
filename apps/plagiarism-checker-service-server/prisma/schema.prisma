datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model PlagiarismCheck {
  checkResult   CheckResult?               @relation(fields: [checkResultId], references: [id])
  checkResultId String?
  createdAt     DateTime                   @default(now())
  document      Document?                  @relation(fields: [documentId], references: [id])
  documentId    String?
  id            String                     @id @default(cuid())
  status        EnumPlagiarismCheckStatus?
  updatedAt     DateTime                   @updatedAt
}

model Document {
  content          String?
  createdAt        DateTime          @default(now())
  id               String            @id @default(cuid())
  plagiarismChecks PlagiarismCheck[]
  title            String?
  updatedAt        DateTime          @updatedAt
  user             User?             @relation(fields: [userId], references: [id])
  userId           String?
}

model CheckResult {
  createdAt            DateTime          @default(now())
  id                   String            @id @default(cuid())
  plagiarismChecks     PlagiarismCheck[]
  plagiarismPercentage Float?
  report               Json?
  updatedAt            DateTime          @updatedAt
}

model User {
  createdAt DateTime   @default(now())
  documents Document[]
  email     String?    @unique
  firstName String?
  id        String     @id @default(cuid())
  lastName  String?
  password  String
  roles     Json
  updatedAt DateTime   @updatedAt
  username  String     @unique
}

enum EnumPlagiarismCheckStatus {
  Option1
}
